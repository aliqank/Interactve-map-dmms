<div id="map"></div>

<app-sidebar 
  [map]="map" 
  [apiError]="apiError"
  (layerControlToggled)="toggleLayerControl()"
  (searchControlToggled)="toggleSearchControl()"
  (measureControlToggled)="onMeasureControlToggled()"
  (geoJsonControlToggled)="toggleGeoJsonControl()"
  (polygonControlToggled)="togglePolygonControl()"
  (dataSendingControlToggled)="toggleDataSendingControl()"
  (settingsControlToggled)="toggleSettingsControl()"
  (favoritesControlToggled)="toggleFavoritesControl()"
  (findLocationRequested)="findMyLocation()">
</app-sidebar>

<!-- Measurement Modal Component -->
<app-measurement 
  [isVisible]="showMeasurementControl" 
  [map]="map"
  (visibilityChange)="showMeasurementControl = $event">
</app-measurement>

<!-- Layer Control Panel -->
<app-layer-control
  [isVisible]="showLayerControl"
  (visibilityChange)="showLayerControl = $event">
</app-layer-control>

<!-- Search Control Panel -->
<app-search
  [isVisible]="showSearchControl"
  (visibilityChange)="showSearchControl = $event">
</app-search>

<!-- GeoJSON Control Panel -->
<app-geojson-control
  [isVisible]="showGeoJsonControl"
  [map]="map"
  (visibilityChange)="showGeoJsonControl = $event">
</app-geojson-control>

<!-- Polygon Control Panel -->
<app-polygon-draw
  [isVisible]="showPolygonControl"
  [map]="map"
  (visibilityChange)="showPolygonControl = $event">
</app-polygon-draw>

<!-- Settings Control Panel -->
<app-settings
  [isVisible]="showSettingsControl"
  (visibilityChange)="showSettingsControl = $event">
</app-settings>

<!-- Favorites Control Panel -->
<app-favorites
  [isVisible]="showFavoritesControl"
  (visibilityChange)="showFavoritesControl = $event">
</app-favorites>

<!-- Data Sending Control Panel -->
<app-data-sending
  [isVisible]="showDataSendingControl"
  [map]="map"
  (visibilityChange)="showDataSendingControl = $event">
</app-data-sending>

<app-toast></app-toast>